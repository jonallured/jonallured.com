{% assign image_extension = include.ext | default: "png" %}

{% assign image_height = include.height | default: "570" %}

{% assign image_loading = include.loading | default: "lazy" %}

{%- capture small_src -%}
/images/post-{{ page.number }}/{{ include.slug }}-900.{{ image_extension }}
{%- endcapture -%}

{%- capture medium_src -%}
/images/post-{{ page.number }}/{{ include.slug }}-1200.{{ image_extension }}
{%- endcapture -%}

{%- capture large_src -%}
/images/post-{{ page.number }}/{{ include.slug }}-1800.{{ image_extension }}
{%- endcapture -%}

{%- capture full_src -%}
/images/post-{{ page.number }}/{{ include.slug }}-full.{{ image_extension }}
{%- endcapture -%}

<figure>
  <a href="{{ full_src }}">
    <img
      alt="{{ include.alt }}"
      height="{{ image_height }}"
      loading="{{ image_loading }}"
      sizes="(max-width: 800px) calc(100vw - 80px), 760px"
      src="{{ full_src }}"
      srcset="{{ small_src }} 900w, {{ medium_src }} 1200w, {{ large_src }} 1800w"
      title="click for bigger"
      width="760"
    />
  </a>
  <figcaption>{{ include.caption }}</figcaption>
</figure>
